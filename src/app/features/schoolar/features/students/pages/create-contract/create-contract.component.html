<div class="grid">
    <div class="col-12">
        <div class="card">
            <h5>Create Student Contract</h5>
            <p>Create a new contract for a student</p>

            <p-toast></p-toast>

            <form [formGroup]="contractForm" (ngSubmit)="onSubmit()">
                <div class="grid formgrid p-fluid">
                    <div class="field col-12 md:col-6">
                        <label for="student">Student</label>
                        <p-dropdown
                            id="student"
                            formControlName="student"
                            [options]="students"
                            optionLabel="name"
                            placeholder="Select a student"
                            [(ngModel)]="selectedStudent"
                            [showClear]="true">
                            <ng-template pTemplate="item" let-student>
                                <div>
                                    <div>{{student.name}}</div>
                                    <div class="text-sm text-500">{{student.email}} - {{student.center}}</div>
                                </div>
                            </ng-template>
                        </p-dropdown>
                        <small *ngIf="contractForm.get('student')?.invalid && contractForm.get('student')?.touched" class="p-error">
                            Student is required
                        </small>
                    </div>

                    <div class="field col-12 md:col-6">
                        <label for="contractType">Contract Type</label>
                        <p-dropdown
                            id="contractType"
                            formControlName="contractType"
                            [options]="contractTypes"
                            optionLabel="label"
                            optionValue="value"
                            placeholder="Select contract type">
                        </p-dropdown>
                        <small *ngIf="contractForm.get('contractType')?.invalid && contractForm.get('contractType')?.touched" class="p-error">
                            Contract type is required
                        </small>
                    </div>

                    <div class="field col-12 md:col-6">
                        <label for="startDate">Start Date</label>
                        <p-calendar
                            id="startDate"
                            formControlName="startDate"
                            [showIcon]="true"
                            dateFormat="yy-mm-dd"
                            placeholder="Select start date">
                        </p-calendar>
                        <small *ngIf="contractForm.get('startDate')?.invalid && contractForm.get('startDate')?.touched" class="p-error">
                            Start date is required
                        </small>
                    </div>

                    <div class="field col-12 md:col-6">
                        <label for="endDate">End Date</label>
                        <p-calendar
                            id="endDate"
                            formControlName="endDate"
                            [showIcon]="true"
                            dateFormat="yy-mm-dd"
                            placeholder="Select end date">
                        </p-calendar>
                        <small *ngIf="contractForm.get('endDate')?.invalid && contractForm.get('endDate')?.touched" class="p-error">
                            End date is required
                        </small>
                    </div>

                    <div class="field col-12 md:col-6">
                        <label for="paymentFrequency">Payment Frequency</label>
                        <p-dropdown
                            id="paymentFrequency"
                            formControlName="paymentFrequency"
                            [options]="paymentFrequencies"
                            optionLabel="label"
                            optionValue="value"
                            placeholder="Select payment frequency">
                        </p-dropdown>
                        <small *ngIf="contractForm.get('paymentFrequency')?.invalid && contractForm.get('paymentFrequency')?.touched" class="p-error">
                            Payment frequency is required
                        </small>
                    </div>

                    <div class="field col-12 md:col-6">
                        <label for="paymentAmount">Payment Amount</label>
                        <p-inputNumber
                            id="paymentAmount"
                            formControlName="paymentAmount"
                            mode="currency"
                            currency="USD"
                            locale="en-US">
                        </p-inputNumber>
                        <small *ngIf="contractForm.get('paymentAmount')?.invalid && contractForm.get('paymentAmount')?.touched" class="p-error">
                            Valid payment amount is required
                        </small>
                    </div>

                    <div class="field col-12 md:col-6">
                        <label for="status">Status</label>
                        <p-dropdown
                            id="status"
                            formControlName="status"
                            [options]="statuses"
                            optionLabel="label"
                            optionValue="value"
                            placeholder="Select status">
                        </p-dropdown>
                        <small *ngIf="contractForm.get('status')?.invalid && contractForm.get('status')?.touched" class="p-error">
                            Status is required
                        </small>
                    </div>

                    <div class="field col-12">
                        <label for="terms">Terms and Conditions</label>
                        <p-inputTextarea
                            id="terms"
                            formControlName="terms"
                            [rows]="5"
                            [autoResize]="true"
                            placeholder="Enter contract terms and conditions">
                        </p-inputTextarea>
                        <small *ngIf="contractForm.get('terms')?.invalid && contractForm.get('terms')?.touched" class="p-error">
                            Terms and conditions are required
                        </small>
                    </div>
                </div>

                <div class="flex justify-content-end mt-4">
                    <p-button
                        type="submit"
                        label="Create Contract"
                        icon="pi pi-check"
                        [loading]="loading"
                        [disabled]="contractForm.invalid">
                    </p-button>
                </div>
            </form>
        </div>
    </div>
</div>
