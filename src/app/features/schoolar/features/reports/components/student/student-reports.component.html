<section class="grid">
    <div class="col-12 flex justify-content-between items-center mb-4">
        <div>
            <h2 class="font-bold text-2xl mb-4">Relatório de alunos</h2>
            <span class="text-lg">Análise e estatística dos alunos</span>
        </div>
        <div class="flex gap-2 h-1 p-4">
            <button
                pButton
                pRipple
                label="Mês"
                icon="pi pi-chevron-down"
                iconPos="right"
                class="p-button-outlined p-button-secondary"
            ></button>
            <button
                pButton
                pRipple
                label="Filtros"
                icon="pi pi-filter"
                class="p-button-outlined p-button-secondary"
            ></button>
            <button
                pButton
                pRipple
                label="Exportar"
                icon="pi pi-download"
                class="p-button-primary"
            ></button>
        </div>
    </div>

    <!-- KPI Section -->
    <div class="col-12 md:col-6 xl:col-3" *ngFor="let kpi of studentKpis$ | async">
        <div class="card h-full">
            <span class="font-semibold text-lg">{{ kpi.label }}</span>
            <div class="flex justify-content-between align-items-start mt-3">
                <div class="w-6">
                    <span class="text-4xl font-bold text-900">{{ kpi.current }}</span>
                    <div [ngClass]="kpi.diff > 0 ? 'text-green-500' : 'text-red-500'">
                        <i class="pi" [ngClass]="kpi.diff > 0 ? 'pi-arrow-up' : 'pi-arrow-down'"></i>
                        {{ kpi.diff }}%
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard Section -->
    <div class="col-12 mt-4">
        <h3 class="font-semibold text-xl mb-3">Dashboard</h3>
    </div>

    <!-- Charts in the same row -->
    <div class="col-12 md:col-6">
        <div class="card h-full">
            <p-chart
                type="bar"
                [data]="attendanceByMonthData"
                [options]="attendanceByMonthOptions"
                height="300px"
            ></p-chart>
        </div>
    </div>

    <div class="col-12 md:col-6">
        <div class="card h-full">
            <p-chart
                type="pie"
                [data]="studentsByStateData"
                [options]="studentsByStateOptions"
                height="300px"
            ></p-chart>
        </div>
    </div>

    <!-- Students by Level Chart (below) -->
    <div class="col-12">
        <div class="card h-full">
            <p-chart
                type="bar"
                [data]="studentsByLevelData"
                [options]="studentsByLevelOptions"
                height="300px"
            ></p-chart>
        </div>
    </div>
</section>
