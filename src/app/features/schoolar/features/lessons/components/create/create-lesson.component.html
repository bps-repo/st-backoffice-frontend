<p-toast></p-toast>

<div class="grid">
    <div id="mainHeader" class="col-12 flex justify-content-between items-center mb-4 sticky-header">
        <div>
            <h2 class="font-bold text-2xl mb-4">Nova aula</h2>
            <span class="text-lg">Cadastro completo de aulas</span>
        </div>
    </div>

    <div class="col-12">
        <div class="card">
            <form class="p-fluid grid" [formGroup]="form">
                <div class="col-12 md:col-12  field">
                    <label for="title" class="font-bold">Nome da aula *</label>
                    <input id="title" type="text" pInputText formControlName="title" placeholder="Ex. Aula de inglês"
                        required>
                </div>

                <div class="col-12 md:col-6 field">
                    <label for="center" class="font-bold">Centro *</label>
                    <p-dropdown id="center" [options]="centerOptions" formControlName="centerId" optionLabel="label"
                        optionValue="value" placeholder="Selecione o centro" [showClear]="true" [required]="true">
                    </p-dropdown>
                </div>

                <div class="col-12 md:col-6  field">
                    <label for="unit" class="font-bold">Unidade *</label>
                    <p-dropdown id="unit" [options]="unitOptions" formControlName="unitId" optionLabel="label"
                        optionValue="value" placeholder="Selecione a unidade" [showClear]="true" [required]="true">
                    </p-dropdown>
                </div>

                <div class="col-12 md:col-6 field">
                    <label for="weekDay" class="font-bold">Dia da Semana *</label>
                    <p-dropdown id="weekDay" [options]="weekDayOptions" formControlName="weekDay" optionLabel="label"
                        optionValue="value" placeholder="Selecione o dia da semana" [showClear]="true"
                        [required]="true">
                    </p-dropdown>
                </div>

                <div class="col-12 md:col-6 field">
                    <label for="startDatetime" class="font-bold">Hora de Início *</label>
                    <p-calendar id="startDatetime" formControlName="startDatetime" [showIcon]="true" [timeOnly]="true"
                        hourFormat="24" [required]="true">
                    </p-calendar>
                </div>

                <div class="col-12 md:col-6 field">
                    <label for="endDatetime" class="font-bold">Hora de fim *</label>
                    <p-calendar id="endDatetime" formControlName="endDatetime" [showIcon]="true" [timeOnly]="true"
                        hourFormat="24" [required]="true">
                    </p-calendar>
                </div>

                <div class="col-12 md:col-6  field">
                    <label for="teacher" class="font-bold">Professor responsável *</label>
                    <p-dropdown id="teacher" [options]="teacherOptions" formControlName="teacherId" optionLabel="label"
                        optionValue="value" placeholder="Selecione o professor" [showClear]="true" [required]="true">
                    </p-dropdown>
                </div>

                <div class="col-12 field">
                    <div class="flex align-items-center">
                        <label for="online" class="font-bold mr-2">Aula online?</label>
                        <p-checkbox id="online" formControlName="online" [binary]="true">
                        </p-checkbox>
                    </div>
                </div>

                <div class="col-12 field" *ngIf="form.get('online')?.value">
                    <label for="onlineLink" class="font-bold">Link da aula online</label>
                    <input id="onlineLink" type="text" pInputText formControlName="onlineLink"
                        placeholder="Enter online meeting link">
                </div>

                <div class="col-12 field">
                    <label for="description" class="font-bold">Descrição</label>
                    <textarea id="description" rows="3" pInputTextarea formControlName="description"
                        placeholder="Descreva  os objectivos e conteúdos das aulas">
                    </textarea>
                </div>
            </form>

            <div class="flex justify-content-end gap-2 mt-4">
                <button pButton label="Cancelar" icon="pi pi-times" class="p-button-outlined p-button-secondary mr-2"
                    (click)="cancel()">
                </button>
                <button pButton label="Criar aula" [loading]="loading" (click)="saveLesson()">
                </button>
            </div>
        </div>
    </div>
</div>
