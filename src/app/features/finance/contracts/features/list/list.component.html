<div class="grid">
    <div class="col-12">
        <app-global-table
            tableLabel="Lista de Contratos"
            [data]="contracts"
            [entity]="'contracts'"
            [columns]="columns"
            [globalFilterFields]="globalFilters"
            [loading]="loading"
            (createEntity)="navigateToCreateContract()"
            class="w-full"
        >
            <!-- Custom template for status column -->
            <ng-template pTemplate="body" let-contract>
                <tr>
                    <td>{{ contract.studentCode }}</td>
                    <td>{{ contract.studentName }}</td>
                    <td>{{ contract.studentEmail }}</td>
                    <td>{{ contract.center }}</td>
                    <td>{{ contract.level }}</td>
                    <td>{{ contract.seller }}</td>
                    <td>
                        <p-tag
                            [value]="contract.contractType"
                            [severity]="contract.contractType === 'VIP' ? 'warning' : 'info'">
                        </p-tag>
                    </td>
                    <td>{{ contract.period }}</td>
                    <td>{{ contract.amount }}</td>
                    <td>{{ contract.installments }}</td>
                    <td>
                        <p-tag
                            [value]="contract.status"
                            [severity]="getStatusSeverity(contract.status)">
                        </p-tag>
                    </td>
                    <td>
                        <p-button
                            icon="pi pi-eye"
                            [text]="true"
                            [rounded]="true"
                            severity="info"
                            (onClick)="viewContractDetails(contract.id)"
                            pTooltip="Ver Detalhes">
                        </p-button>
                    </td>
                </tr>
            </ng-template>
        </app-global-table>
    </div>
</div>
